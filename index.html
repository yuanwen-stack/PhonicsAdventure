<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Phonics Master Ultimate</title>
    <style>
        body { font-family: 'Verdana', sans-serif; background-color: #E0F7FA; text-align: center; margin: 0; padding: 15px; -webkit-tap-highlight-color: transparent; }
        
        /* Container */
        .game-card {
            background: white;
            max-width: 600px;
            margin: 0 auto;
            border-radius: 25px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border: 6px solid #00ACC1;
            min-height: 80vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        h1 { color: #00838F; margin: 0 0 15px 0; font-size: 26px; }
        
        /* The Big Text */
        #word-display {
            font-size: 85px;
            font-weight: 900;
            color: #37474F;
            margin: 20px 0;
            letter-spacing: 2px;
            line-height: 1.1;
        }

        /* Progress Bar (1/26) */
        #progress { font-size: 14px; color: #999; margin-bottom: 10px; font-weight: bold; }

        /* Guide Box */
        .guide-box {
            background: #FFF3E0;
            border: 2px solid #FFB74D;
            color: #E65100;
            padding: 12px 20px;
            text-align: left;
            font-size: 18px;
            border-radius: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 0 rgba(0,0,0,0.05);
        }

        /* Audio Helper Button */
        .audio-btn {
            background: #FFECB3;
            border: 2px solid #FFD54F;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            font-size: 22px;
            cursor: pointer;
            color: #F57F17;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .audio-btn:active { transform: scale(0.9); }

        /* Main Action Buttons */
        button.action-btn {
            font-size: 22px;
            padding: 18px 0;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            margin: 8px 0;
            font-weight: bold;
            width: 100%;
            color: white;
            transition: all 0.1s;
            box-shadow: 0 6px rgba(0,0,0,0.2);
        }
        button.action-btn:active { transform: translateY(4px); box-shadow: 0 2px rgba(0,0,0,0.2); }
        
        .btn-check { background-color: #43A047; }
        .btn-next { background-color: #1E88E5; }
        
        /* Menu Buttons */
        .menu-btn { 
            background-color: #00BCD4; 
            color: white; 
            margin: 8px 0; 
            box-shadow: 0 5px #0097A7; 
            font-size: 18px; 
            padding: 15px; 
            width: 100%; 
            border-radius: 15px; 
            border:none; 
            font-weight:bold; 
            cursor: pointer;
        }
        .menu-btn:active { transform: translateY(3px); box-shadow: 0 2px #0097A7; }

        /* Rewards */
        #reward-area { font-size: 110px; animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); margin: 10px 0; }
        @keyframes popIn { 0% { transform: scale(0); } 100% { transform: scale(1); } }

        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="game-card">
        
        <div id="menu-screen">
            <h1>üéì Phonics Ultimate</h1>
            <p style="color:#666; font-size:16px;">Choose your challenge:</p>
            <button class="menu-btn" onclick="startGame('level1')">Level 1: All 26 Letters (Aa-Zz)</button>
            <button class="menu-btn" onclick="startGame('level2')">Level 2: Word Families (Mix)</button>
            <button class="menu-btn" onclick="startGame('level3')">Level 3: Blends & Digraphs</button>
            <button class="menu-btn" onclick="startGame('level4')">Level 4: Sentence Reader</button>
        </div>

        <div id="game-screen" class="hidden">
            <div id="progress"></div>

            <div class="guide-box">
                <div>
                    <span style="font-size:12px; display:block; color:#D84315;">PARENT SAY:</span>
                    <span id="guide-text" style="font-weight:bold;"></span>
                </div>
                <button class="audio-btn" onclick="playHelpAudio()" title="Hear Help">üîä</button>
            </div>

            <div id="word-display"></div>
            <div id="reward-area" class="hidden"></div>

            <button id="check-btn" class="action-btn btn-check" onclick="checkAnswer()">Check Answer! ‚ú®</button>
            
            <div id="nav-buttons" class="hidden">
                <button class="action-btn btn-next" onclick="nextWord()">Next Card ‚û°Ô∏è</button>
                <div style="margin-top:15px;">
                    <span style="color:#999; font-size:14px; text-decoration:underline; cursor:pointer;" onclick="showMenu()">Back to Menu</span>
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- DATA LIBRARY ---
        const gameData = {
            level1: [
                { t: "Aa", g: "/√¶/ (Apple)", r: "üçé", audio: "Apple" },
                { t: "Bb", g: "/b/ (Ball)", r: "‚öΩ", audio: "Ball" },
                { t: "Cc", g: "/k/ (Cat)", r: "üê±", audio: "Cat" },
                { t: "Dd", g: "/d/ (Dog)", r: "üê∂", audio: "Dog" },
                { t: "Ee", g: "/e/ (Egg)", r: "ü•ö", audio: "Egg" },
                { t: "Ff", g: "/f/ (Fish)", r: "üêü", audio: "Fish" },
                { t: "Gg", g: "/g/ (Goat)", r: "üêê", audio: "Goat" },
                { t: "Hh", g: "/h/ (Hat)", r: "üé©", audio: "Hat" },
                { t: "Ii", g: "/i/ (Igloo)", r: "üßä", audio: "Igloo" },
                { t: "Jj", g: "/j/ (Jam)", r: "üçØ", audio: "Jam" },
                { t: "Kk", g: "/k/ (Kite)", r: "Vk", audio: "Kite" },
                { t: "Ll", g: "/l/ (Lion)", r: "ü¶Å", audio: "Lion" },
                { t: "Mm", g: "/m/ (Moon)", r: "üåô", audio: "Moon" },
                { t: "Nn", g: "/n/ (Net)", r: "ü•Ö", audio: "Net" },
                { t: "Oo", g: "/o/ (Octopus)", r: "üêô", audio: "Octopus" },
                { t: "Pp", g: "/p/ (Pig)", r: "üê∑", audio: "Pig" },
                { t: "Qq", g: "/kw/ (Queen)", r: "üëë", audio: "Queen" },
                { t: "Rr", g: "/r/ (Rainbow)", r: "üåà", audio: "Rainbow" },
                { t: "Ss", g: "/s/ (Sun)", r: "‚òÄÔ∏è", audio: "Sun" },
                { t: "Tt", g: "/t/ (Tiger)", r: "üêØ", audio: "Tiger" },
                { t: "Uu", g: "/u/ (Umbrella)", r: "‚òÇÔ∏è", audio: "Umbrella" },
                { t: "Vv", g: "/v/ (Van)", r: "üöê", audio: "Van" },
                { t: "Ww", g: "/w/ (Web)", r: "üï∏Ô∏è", audio: "Web" },
                { t: "Xx", g: "/ks/ (Box)", r: "üì¶", audio: "Box" },
                { t: "Yy", g: "/y/ (Yo-yo)", r: "ü™Ä", audio: "Yo-yo" },
                { t: "Zz", g: "/z/ (Zebra)", r: "ü¶ì", audio: "Zebra" }
            ],
            level2: [
                // AT Family
                { t: "cat", g: "c-at", r: "üê±", audio: "Cat" },
                { t: "bat", g: "b-at", r: "ü¶á", audio: "Bat" },
                { t: "hat", g: "h-at", r: "üé©", audio: "Hat" },
                { t: "mat", g: "m-at", r: "üßò", audio: "Mat" },
                { t: "rat", g: "r-at", r: "üêÄ", audio: "Rat" },
                // AN Family
                { t: "pan", g: "p-an", r: "üç≥", audio: "Pan" },
                { t: "fan", g: "f-an", r: "üí®", audio: "Fan" },
                { t: "van", g: "v-an", r: "üöê", audio: "Van" },
                // IP Family
                { t: "zip", g: "z-ip", r: "ü§ê", audio: "Zip" },
                { t: "lip", g: "l-ip", r: "üëÑ", audio: "Lip" },
                { t: "rip", g: "r-ip", r: "üìÑ", audio: "Rip" },
                // OG/UG Family
                { t: "dog", g: "d-og", r: "üê∂", audio: "Dog" },
                { t: "log", g: "l-og", r: "ü™µ", audio: "Log" },
                { t: "bug", g: "b-ug", r: "ü™≤", audio: "Bug" },
                { t: "mug", g: "m-ug", r: "‚òï", audio: "Mug" }
            ],
            level3: [
                { t: "ship", g: "sh-ip", r: "üö¢", audio: "Ship" },
                { t: "fish", g: "f-ish", r: "üêü", audio: "Fish" },
                { t: "chop", g: "ch-op", r: "ü™ì", audio: "Chop" },
                { t: "frog", g: "fr-og", r: "üê∏", audio: "Frog" },
                { t: "stop", g: "st-op", r: "üõë", audio: "Stop" },
                { t: "star", g: "st-ar", r: "‚≠ê", audio: "Star" },
                { t: "blue", g: "bl-ue", r: "üîµ", audio: "Blue" },
                { t: "flag", g: "fl-ag", r: "üèÅ", audio: "Flag" },
                { t: "tree", g: "tr-ee", r: "üå≥", audio: "Tree" },
                { t: "duck", g: "d-uck", r: "ü¶Ü", audio: "Duck" }
            ],
            level4: [
                { t: "a big cat", g: "Sight words + CVC", r: "üêÜ", audio: "A big cat" },
                { t: "the red hen", g: "the... red... hen", r: "üêî", audio: "The red hen" },
                { t: "I see a dog", g: "I... see... a... dog", r: "üêï", audio: "I see a dog" },
                { t: "sun is hot", g: "sun... is... hot", r: "ü•µ", audio: "Sun is hot" },
                { t: "run to me", g: "run... to... me", r: "üèÉ", audio: "Run to me" },
                { t: "cat on a mat", g: "cat... on... a... mat", r: "üõãÔ∏è", audio: "Cat on a mat" }
            ]
        };

        // --- GAME LOGIC ---
        let currentList = [];
        let index = 0;
        let synthesis = window.speechSynthesis;

        // Shuffle Function (Fisher-Yates)
        function shuffle(array) {
            let currentIndex = array.length, randomIndex;
            while (currentIndex != 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
            }
            return array;
        }

        function showMenu() {
            document.getElementById('menu-screen').classList.remove('hidden');
            document.getElementById('game-screen').classList.add('hidden');
            synthesis.cancel();
        }

        function startGame(lvl) {
            // 1. Load Data
            // We use spread syntax [...] to copy the array so we don't mess up the original order permanently
            let rawData = [...gameData[lvl]];

            // 2. Logic: Shuffle everything EXCEPT Level 1 (Alphabet should be ordered)
            if (lvl === 'level1') {
                currentList = rawData; 
            } else {
                currentList = shuffle(rawData);
            }

            index = 0;
            document.getElementById('menu-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            loadCard();
        }

        function loadCard() {
            const item = currentList[index];
            
            // Text Size Adjustment (Smaller for sentences)
            const displayEl = document.getElementById('word-display');
            displayEl.innerText = item.t;
            if (item.t.length > 5) { displayEl.style.fontSize = "60px"; }
            else { displayEl.style.fontSize = "85px"; }

            // Parent Guide
            document.getElementById('guide-text').innerText = item.g;
            
            // Progress Counter
            document.getElementById('progress').innerText = `Card ${index + 1} of ${currentList.length}`;

            // Reset State
            document.getElementById('reward-area').classList.add('hidden');
            document.getElementById('reward-area').innerText = item.r;
            document.getElementById('check-btn').classList.remove('hidden');
            document.getElementById('nav-buttons').classList.add('hidden');
        }

        function playHelpAudio() {
            // Reads the 'audio' property (e.g., "Apple" instead of just "A")
            const item = currentList[index];
            let utterance = new SpeechSynthesisUtterance(item.audio);
            utterance.rate = 0.85; 
            synthesis.cancel();
            synthesis.speak(utterance);
        }

        function checkAnswer() {
            document.getElementById('reward-area').classList.remove('hidden');
            document.getElementById('check-btn').classList.add('hidden');
            document.getElementById('nav-buttons').classList.remove('hidden');

            // 3x Repeat Loop
            const textToRead = currentList[index].audio;
            synthesis.cancel();
            let count = 0;
            
            function speakLoop() {
                if(count < 3) {
                    let u = new SpeechSynthesisUtterance(textToRead);
                    u.rate = 0.9;
                    u.pitch = 1.1;
                    u.onend = function() { setTimeout(speakLoop, 500); };
                    synthesis.speak(u);
                    count++;
                }
            }
            speakLoop();
        }

        function nextWord() {
            synthesis.cancel();
            index++;
            if (index >= currentList.length) {
                // End of Level
                let u = new SpeechSynthesisUtterance("You finished the whole level! Great job!");
                synthesis.speak(u);
                alert("üéâ LEVEL COMPLETE! You are a reading genius!");
                showMenu();
            } else {
                loadCard();
            }
        }
    </script>
</body>
</html>
