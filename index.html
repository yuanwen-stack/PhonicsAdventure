<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Phonics Step-By-Step</title>
    <style>
        body { font-family: 'Comic Sans MS', 'Verdana', sans-serif; background-color: #E3F2FD; text-align: center; margin: 0; padding: 15px; }
        
        .game-card {
            background: white;
            max-width: 600px;
            margin: 0 auto;
            border-radius: 25px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border: 6px solid #2196F3;
            min-height: 85vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        h1 { color: #1565C0; margin: 0 0 15px 0; font-size: 24px; }

        /* Word Display */
        #word-display {
            font-size: 90px;
            font-weight: 900;
            color: #333;
            margin: 15px 0;
            line-height: 1;
        }

        /* Guide Box */
        .guide-box {
            background: #FFF9C4;
            border: 2px solid #FBC02D;
            color: #E65100;
            padding: 10px 15px;
            text-align: left;
            font-size: 16px;
            border-radius: 12px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .audio-btn {
            background: #FFECB3;
            border: 2px solid #FFC107;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Buttons */
        button.action-btn {
            font-size: 22px;
            padding: 18px 0;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            margin: 10px 0;
            font-weight: bold;
            width: 100%;
            color: white;
            box-shadow: 0 5px rgba(0,0,0,0.2);
            transition: all 0.1s;
        }
        button.action-btn:active { transform: scale(0.97); }
        
        .btn-check { background-color: #4CAF50; }
        .btn-next { background-color: #1976D2; }
        
        .menu-btn { 
            background-color: #00BCD4; 
            color: white; 
            margin: 8px 0; 
            padding: 15px; 
            width: 100%; 
            border-radius: 15px; 
            border:none; 
            font-weight:bold; 
            font-size: 18px; 
            box-shadow: 0 4px #0097A7; 
            cursor: pointer;
        }

        /* Special Highlights */
        .digraph { color: #D32F2F; text-decoration: underline; }
        .hidden { display: none; }
        .example-text { color: #777; font-style: italic; font-size: 16px; margin-bottom: 10px; }
        
        #reward-area { 
            font-size: 90px; 
            margin: 15px 0; 
            letter-spacing: 20px;
            animation: bounceIn 0.8s;
        }
        @keyframes bounceIn { 0% { transform: scale(0); } 60% { transform: scale(1.2); } 100% { transform: scale(1); } }
    </style>
</head>
<body>

    <div class="game-card">
        
        <div id="menu-screen">
            <h1>ğŸš€ Phonics Steps</h1>
            <p>Based on your 6-Step Guide:</p>
            <button class="menu-btn" onclick="startGame('level1')">Step 1: Letter Sounds (A-Z)</button>
            <button class="menu-btn" onclick="startGame('level2')">Step 2: CVC Blending (Pan)</button>
            <button class="menu-btn" onclick="startGame('level3')">Step 3: Digraphs (Sh, Ch, Th)</button>
            <button class="menu-btn" onclick="startGame('level4')">Step 5: Fluency (Sentences)</button>
        </div>

        <div id="game-screen" class="hidden">
            <div id="progress" style="font-size:12px; color:#aaa; text-align:right;"></div>

            <div class="guide-box">
                <div>
                    <span style="font-size:10px; display:block; color:#F9A825; font-weight:bold;">PARENT GUIDE:</span>
                    <span id="guide-text" style="font-weight:bold;"></span>
                </div>
                <button class="audio-btn" onclick="playAudio(false)">ğŸ”Š</button>
            </div>

            <div id="word-display"></div>
            <div id="example-text" class="example-text"></div>
            
            <div id="reward-area" class="hidden"></div>

            <button id="check-btn" class="action-btn btn-check" onclick="checkAnswer()">Reveal! âœ¨</button>
            
            <div id="nav-buttons" class="hidden">
                <button class="action-btn btn-next" onclick="nextWord()">Next Card â¡ï¸</button>
                <div style="margin-top:15px;">
                    <span style="color:#999; font-size:14px; text-decoration:underline; cursor:pointer;" onclick="showMenu()">Back to Menu</span>
                </div>
            </div>
        </div>

    </div>

    <script>
        const gameData = {
            // STEP 1: LETTER SOUNDS (User Approved)
            level1: [
                { t: "Aa", g: "/Ã¦/ (Apple)", r: "ğŸ ğŸœ", ex: "Apple, Ant", audio: "Ah... A for Apple... A for Ant" },
                { t: "Bb", g: "/b/ (Ball)", r: "âš½ ğŸšŒ", ex: "Ball, Bus", audio: "Buh... B for Ball... B for Bus" },
                { t: "Cc", g: "/k/ (Cat)", r: "ğŸ± ğŸ‚", ex: "Cat, Cake", audio: "Kuh... C for Cat... C for Cake" },
                { t: "Dd", g: "/d/ (Dog)", r: "ğŸ¶ ğŸšª", ex: "Dog, Door", audio: "Duh... D for Dog... D for Door" },
                { t: "Ee", g: "/e/ (Egg)", r: "ğŸ¥š ğŸ˜", ex: "Egg, Elephant", audio: "Eh... E for Egg... E for Elephant" },
                { t: "Ff", g: "/f/ (Fish)", r: "ğŸŸ ğŸ’¨", ex: "Fish, Fan", audio: "Fff... F for Fish... F for Fan" },
                { t: "Gg", g: "/g/ (Goat)", r: "ğŸ ğŸ", ex: "Goat, Gift", audio: "Guh... G for Goat... G for Gift" },
                { t: "Hh", g: "/h/ (Hat)", r: "ğŸ© ğŸ ", ex: "Hat, House", audio: "Huh... H for Hat... H for House" },
                { t: "Ii", g: "/i/ (Igloo)", r: "ğŸ§Š âœ’ï¸", ex: "Igloo, Ink", audio: "Ih... I for Igloo... I for Ink" },
                { t: "Jj", g: "/j/ (Jam)", r: "ğŸ¯ âœˆï¸", ex: "Jam, Jet", audio: "Juh... J for Jam... J for Jet" },
                { t: "Kk", g: "/k/ (Kite)", r: "Vk ğŸ”‘", ex: "Kite, Key", audio: "Kuh... K for Kite... K for Key" },
                { t: "Ll", g: "/l/ (Lion)", r: "ğŸ¦ ğŸƒ", ex: "Lion, Leaf", audio: "Lll... L for Lion... L for Leaf" },
                { t: "Mm", g: "/m/ (Moon)", r: "ğŸŒ™ ğŸ­", ex: "Moon, Mouse", audio: "Mmm... M for Moon... M for Mouse" },
                { t: "Nn", g: "/n/ (Net)", r: "ğŸ¥… ğŸªº", ex: "Net, Nest", audio: "Nnn... N for Net... N for Nest" },
                { t: "Oo", g: "/o/ (Octopus)", r: "ğŸ™ ğŸŠ", ex: "Octopus, Orange", audio: "Ah... O for Octopus... O for Orange" },
                { t: "Pp", g: "/p/ (Pig)", r: "ğŸ· ğŸ–Šï¸", ex: "Pig, Pen", audio: "Puh... P for Pig... P for Pen" },
                { t: "Qq", g: "/kw/ (Queen)", r: "ğŸ‘‘ ğŸ›Œ", ex: "Queen, Quilt", audio: "Kwuh... Q for Queen... Q for Quilt" },
                { t: "Rr", g: "/r/ (Rainbow)", r: "ğŸŒˆ ğŸ¤–", ex: "Rainbow, Robot", audio: "Rrr... R for Rainbow... R for Robot" },
                { t: "Ss", g: "/s/ (Sun)", r: "â˜€ï¸ ğŸ", ex: "Sun, Snake", audio: "Sss... S for Sun... S for Snake" },
                { t: "Tt", g: "/t/ (Tiger)", r: "ğŸ¯ â›º", ex: "Tiger, Tent", audio: "Tuh... T for Tiger... T for Tent" },
                { t: "Uu", g: "/u/ (Umbrella)", r: "â˜‚ï¸ â¬†ï¸", ex: "Umbrella, Up", audio: "Uh... U for Umbrella... U for Up" },
                { t: "Vv", g: "/v/ (Van)", r: "ğŸš ğŸ»", ex: "Van, Violin", audio: "Vvv... V for Van... V for Violin" },
                { t: "Ww", g: "/w/ (Web)", r: "ğŸ•¸ï¸ âŒš", ex: "Web, Watch", audio: "Wuh... W for Web... W for Watch" },
                { t: "Xx", g: "/ks/ (Box)", r: "ğŸ“¦ ğŸ¦Š", ex: "Box, Fox", audio: "Kss... Box... Fox" },
                { t: "Yy", g: "/y/ (Yo-yo)", r: "ğŸª€ ğŸŸ¡", ex: "Yo-yo, Yellow", audio: "Yuh... Y for Yo-yo... Y for Yellow" },
                { t: "Zz", g: "/z/ (Zebra)", r: "ğŸ¦“ ğŸ¤", ex: "Zebra, Zip", audio: "Zzz... Z for Zebra... Z for Zip" }
            ],

            // STEP 2: BLENDING (CVC)
            // Fix: Audio now reads the WHOLE word smoothly.
            level2: [
                { t: "pan", g: "/p/-/a/-/n/", r: "ğŸ³", ex: "Can you blend it?", audio: "Pan" },
                { t: "map", g: "/m/-/a/-/p/", r: "ğŸ—ºï¸", ex: "Can you blend it?", audio: "Map" },
                { t: "sit", g: "/s/-/i/-/t/", r: "ğŸ§˜", ex: "Can you blend it?", audio: "Sit" },
                { t: "top", g: "/t/-/o/-/p/", r: "ğŸ”", ex: "Can you blend it?", audio: "Top" },
                { t: "cat", g: "/c/-/a/-/t/", r: "ğŸ±", ex: "Can you blend it?", audio: "Cat" },
                { t: "dog", g: "/d/-/o/-/g/", r: "ğŸ¶", ex: "Can you blend it?", audio: "Dog" },
                { t: "run", g: "/r/-/u/-/n/", r: "ğŸƒ", ex: "Can you blend it?", audio: "Run" },
                { t: "red", g: "/r/-/e/-/d/", r: "ğŸŸ¥", ex: "Can you blend it?", audio: "Red" },
                { t: "bus", g: "/b/-/u/-/s/", r: "ğŸšŒ", ex: "Can you blend it?", audio: "Bus" },
                { t: "hen", g: "/h/-/e/-/n/", r: "ğŸ”", ex: "Can you blend it?", audio: "Hen" }
            ],

            // STEP 3: DIGRAPHS & TRICKY WORDS
            // Highlighting the digraph (sh, ch) to help him see the pattern.
            level3: [
                { t: "<span class='digraph'>sh</span>ip", g: "sh - ip", r: "ğŸš¢", ex: "Digraph: sh", audio: "Ship" },
                { t: "<span class='digraph'>sh</span>op", g: "sh - op", r: "ğŸ›’", ex: "Digraph: sh", audio: "Shop" },
                { t: "<span class='digraph'>ch</span>ip", g: "ch - ip", r: "ğŸŸ", ex: "Digraph: ch", audio: "Chip" },
                { t: "<span class='digraph'>ch</span>in", g: "ch - in", r: "ğŸ¤”", ex: "Digraph: ch", audio: "Chin" },
                { t: "<span class='digraph'>th</span>in", g: "th - in", r: "ğŸ“", ex: "Digraph: th", audio: "Thin" },
                { t: "ri<span class='digraph'>ng</span>", g: "r - i - ng", r: "ğŸ’", ex: "Digraph: ng", audio: "Ring" },
                // Tricky Words (Common Exception Words)
                { t: "the", g: "Tricky Word!", r: "ğŸ‘‰", ex: "Don't sound it out!", audio: "The" },
                { t: "he", g: "Tricky Word!", r: "ğŸ‘¦", ex: "Don't sound it out!", audio: "He" },
                { t: "she", g: "Tricky Word!", r: "ğŸ‘§", ex: "Don't sound it out!", audio: "She" }
            ],

            // STEP 5: FLUENCY (Sentences)
            level4: [
                { t: "The cat sat", g: "The... cat... sat", r: "ğŸˆ", ex: "", audio: "The cat sat" },
                { t: "I see a ship", g: "I... see... a... ship", r: "ğŸš¢", ex: "", audio: "I see a ship" },
                { t: "The dog can run", g: "The... dog... can... run", r: "ğŸ•", ex: "", audio: "The dog can run" },
                { t: "He has a hat", g: "He... has... a... hat", r: "ğŸ©", ex: "", audio: "He has a hat" },
                { t: "She is on the bus", g: "She... is... on... the... bus", r: "ğŸšŒ", ex: "", audio: "She is on the bus" }
            ]
        };

        // --- GAME LOGIC ---
        let currentList = [];
        let index = 0;
        let synthesis = window.speechSynthesis;
        let currentLevelKey = '';

        function shuffle(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function showMenu() {
            document.getElementById('menu-screen').classList.remove('hidden');
            document.getElementById('game-screen').classList.add('hidden');
            synthesis.cancel();
        }

        function startGame(lvl) {
            currentLevelKey = lvl;
            // Level 1: Keep Order (A-Z). Others: Shuffle.
            if(lvl === 'level1') {
                currentList = [...gameData[lvl]];
            } else {
                currentList = shuffle([...gameData[lvl]]);
            }
            index = 0;
            document.getElementById('menu-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            loadCard();
        }

        function loadCard() {
            const item = currentList[index];
            const displayEl = document.getElementById('word-display');
            
            // Use innerHTML to allow colored Digraphs
            displayEl.innerHTML = item.t;
            
            // Font size adjustments
            if (displayEl.innerText.length > 8) { displayEl.style.fontSize = "50px"; }
            else { displayEl.style.fontSize = "90px"; }

            document.getElementById('guide-text').innerText = item.g;
            document.getElementById('example-text').innerText = item.ex; 
            document.getElementById('progress').innerText = `${index + 1} / ${currentList.length}`;

            document.getElementById('reward-area').classList.add('hidden');
            document.getElementById('reward-area').innerText = item.r;
            document.getElementById('check-btn').classList.remove('hidden');
            document.getElementById('nav-buttons').classList.add('hidden');
        }

        function playAudio(isRepeater) {
            synthesis.cancel();
            const item = currentList[index];
            const u = new SpeechSynthesisUtterance(item.audio);
            
            // --- SPEED SETTINGS ---
            if (currentLevelKey === 'level4') {
                u.rate = 0.85; // Natural Sentence Speed
            } else {
                u.rate = 1.0; // Normal Word Speed
            }
            
            u.pitch = 1.1; 

            if(isRepeater) {
                let count = 0;
                function speakLoop() {
                    if(count < 3) {
                        synthesis.speak(u);
                        let u2 = new SpeechSynthesisUtterance(item.audio);
                        u2.rate = u.rate; u2.pitch = u.pitch;
                        u2.onend = function() { setTimeout(speakLoop, 800); };
                        u = u2; 
                        count++;
                    }
                }
                speakLoop();
            } else {
                synthesis.speak(u);
            }
        }

        function checkAnswer() {
            document.getElementById('reward-area').classList.remove('hidden');
            document.getElementById('check-btn').classList.add('hidden');
            document.getElementById('nav-buttons').classList.remove('hidden');
            playAudio(true);
        }

        function nextWord() {
            synthesis.cancel();
            index++;
            if (index >= currentList.length) {
                alert("ğŸ‰ LEVEL COMPLETE! You are a reading genius!");
                showMenu();
            } else {
                loadCard();
            }
        }
    </script>
</body>
</html>
