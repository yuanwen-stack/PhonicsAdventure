<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Phonics Pro V3</title>
    <style>
        body { font-family: 'Arial Rounded MT Bold', 'Verdana', sans-serif; background-color: #E8F5E9; text-align: center; margin: 0; padding: 15px; -webkit-tap-highlight-color: transparent; }
        
        .game-card {
            background: white;
            max-width: 600px;
            margin: 0 auto;
            border-radius: 25px;
            padding: 20px;
            box-shadow: 0 12px 24px rgba(0,0,0,0.15);
            border: 5px solid #4CAF50;
            min-height: 85vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        h1 { color: #2E7D32; margin: 0 0 15px 0; font-size: 24px; }

        /* The Word Display */
        #word-display {
            font-size: 85px;
            font-weight: 900;
            color: #333;
            margin: 15px 0;
            line-height: 1;
        }

        /* The Reward Area (Emojis) */
        #reward-area { 
            font-size: 90px; 
            margin: 15px 0; 
            letter-spacing: 20px;
            animation: bounceIn 0.8s;
        }
        @keyframes bounceIn { 0% { transform: scale(0); } 60% { transform: scale(1.2); } 100% { transform: scale(1); } }

        /* Guide Box */
        .guide-box {
            background: #FFFDE7;
            border: 2px solid #FFD600;
            color: #F57F17;
            padding: 10px 15px;
            text-align: left;
            font-size: 16px;
            border-radius: 12px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Audio Button */
        .audio-btn {
            background: #FFECB3;
            border: 2px solid #FFC107;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Action Buttons */
        button.action-btn {
            font-size: 22px;
            padding: 18px 0;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            margin: 10px 0;
            font-weight: bold;
            width: 100%;
            color: white;
            box-shadow: 0 5px rgba(0,0,0,0.2);
            transition: all 0.1s;
        }
        button.action-btn:active { transform: scale(0.97); }
        
        .btn-check { background-color: #00C853; }
        .btn-next { background-color: #2979FF; }
        
        .menu-btn { 
            background-color: #009688; 
            color: white; 
            margin: 8px 0; 
            padding: 15px; 
            width: 100%; 
            border-radius: 15px; 
            border:none; 
            font-weight:bold; 
            font-size: 18px; 
            box-shadow: 0 4px #00796B; 
            cursor: pointer;
        }

        .hidden { display: none; }
        .example-text { color: #777; font-style: italic; font-size: 16px; margin-bottom: 10px; }
    </style>
</head>
<body>

    <div class="game-card">
        
        <div id="menu-screen">
            <h1>ü¶Å Phonics Pro</h1>
            <p>Select Stage:</p>
            <button class="menu-btn" onclick="startGame('level1')">Level 1: Sounds & Pictures (A-Z)</button>
            <button class="menu-btn" onclick="startGame('level2')">Level 2: Basic Blending (P-an)</button>
            <button class="menu-btn" onclick="startGame('level3')">Level 3: Blends (St-op)</button>
            <button class="menu-btn" onclick="startGame('level4')">Level 4: Sentences</button>
        </div>

        <div id="game-screen" class="hidden">
            <div id="progress" style="font-size:12px; color:#aaa; text-align:right;"></div>

            <div class="guide-box">
                <div>
                    <span style="font-size:10px; display:block; color:#F9A825; font-weight:bold;">SAY THIS:</span>
                    <span id="guide-text" style="font-weight:bold;"></span>
                </div>
                <button class="audio-btn" onclick="playAudio(false)">üîä</button>
            </div>

            <div id="word-display"></div>
            <div id="example-text" class="example-text"></div>
            
            <div id="reward-area" class="hidden"></div>

            <button id="check-btn" class="action-btn btn-check" onclick="checkAnswer()">Show Pictures! ‚ú®</button>
            
            <div id="nav-buttons" class="hidden">
                <button class="action-btn btn-next" onclick="nextWord()">Next Card ‚û°Ô∏è</button>
                <div style="margin-top:15px;">
                    <span style="color:#999; font-size:14px; text-decoration:underline; cursor:pointer;" onclick="showMenu()">Back to Menu</span>
                </div>
            </div>
        </div>

    </div>

    <script>
        /* AUDIO RULES:
           1. Level 1: "Buh... B for Ball... B for Bus"
           2. Level 3: "St... op... Stop" (Grouping the blend)
           3. Level 4: Speed 0.85 (Faster)
        */
        const gameData = {
            level1: [
                { t: "Aa", g: "/√¶/ (Apple, Ant)", r: "üçé üêú", ex: "Apple, Ant", audio: "Ah... A for Apple... A for Ant" },
                { t: "Bb", g: "/b/ (Ball, Bus)", r: "‚öΩ üöå", ex: "Ball, Bus", audio: "Buh... B for Ball... B for Bus" },
                { t: "Cc", g: "/k/ (Cat, Cake)", r: "üê± üéÇ", ex: "Cat, Cake", audio: "Kuh... C for Cat... C for Cake" },
                { t: "Dd", g: "/d/ (Dog, Door)", r: "üê∂ üö™", ex: "Dog, Door", audio: "Duh... D for Dog... D for Door" },
                { t: "Ee", g: "/e/ (Egg, Elephant)", r: "ü•ö üêò", ex: "Egg, Elephant", audio: "Eh... E for Egg... E for Elephant" },
                { t: "Ff", g: "/f/ (Fish, Fan)", r: "üêü üí®", ex: "Fish, Fan", audio: "Fff... F for Fish... F for Fan" },
                { t: "Gg", g: "/g/ (Goat, Gift)", r: "üêê üéÅ", ex: "Goat, Gift", audio: "Guh... G for Goat... G for Gift" },
                { t: "Hh", g: "/h/ (Hat, House)", r: "üé© üè†", ex: "Hat, House", audio: "Huh... H for Hat... H for House" },
                { t: "Ii", g: "/i/ (Igloo, Ink)", r: "üßä ‚úíÔ∏è", ex: "Igloo, Ink", audio: "Ih... I for Igloo... I for Ink" },
                { t: "Jj", g: "/j/ (Jam, Jet)", r: "üçØ ‚úàÔ∏è", ex: "Jam, Jet", audio: "Juh... J for Jam... J for Jet" },
                { t: "Kk", g: "/k/ (Kite, Key)", r: "Vk üîë", ex: "Kite, Key", audio: "Kuh... K for Kite... K for Key" },
                { t: "Ll", g: "/l/ (Lion, Leaf)", r: "ü¶Å üçÉ", ex: "Lion, Leaf", audio: "Lll... L for Lion... L for Leaf" },
                { t: "Mm", g: "/m/ (Moon, Mouse)", r: "üåô üê≠", ex: "Moon, Mouse", audio: "Mmm... M for Moon... M for Mouse" },
                { t: "Nn", g: "/n/ (Net, Nest)", r: "ü•Ö ü™∫", ex: "Net, Nest", audio: "Nnn... N for Net... N for Nest" },
                { t: "Oo", g: "/o/ (Octopus, Orange)", r: "üêô üçä", ex: "Octopus, Orange", audio: "Ah... O for Octopus... O for Orange" },
                { t: "Pp", g: "/p/ (Pig, Pen)", r: "üê∑ üñäÔ∏è", ex: "Pig, Pen", audio: "Puh... P for Pig... P for Pen" },
                { t: "Qq", g: "/kw/ (Queen, Quilt)", r: "üëë üõå", ex: "Queen, Quilt", audio: "Kwuh... Q for Queen... Q for Quilt" },
                { t: "Rr", g: "/r/ (Rainbow, Robot)", r: "üåà ü§ñ", ex: "Rainbow, Robot", audio: "Rrr... R for Rainbow... R for Robot" },
                { t: "Ss", g: "/s/ (Sun, Snake)", r: "‚òÄÔ∏è üêç", ex: "Sun, Snake", audio: "Sss... S for Sun... S for Snake" },
                { t: "Tt", g: "/t/ (Tiger, Tent)", r: "üêØ ‚õ∫", ex: "Tiger, Tent", audio: "Tuh... T for Tiger... T for Tent" },
                { t: "Uu", g: "/u/ (Umbrella, Up)", r: "‚òÇÔ∏è ‚¨ÜÔ∏è", ex: "Umbrella, Up", audio: "Uh... U for Umbrella... U for Up" },
                { t: "Vv", g: "/v/ (Van, Violin)", r: "üöê üéª", ex: "Van, Violin", audio: "Vvv... V for Van... V for Violin" },
                { t: "Ww", g: "/w/ (Web, Watch)", r: "üï∏Ô∏è ‚åö", ex: "Web, Watch", audio: "Wuh... W for Web... W for Watch" },
                { t: "Xx", g: "/ks/ (Box, Fox)", r: "üì¶ ü¶ä", ex: "Box, Fox", audio: "Kss... Box... Fox" },
                { t: "Yy", g: "/y/ (Yo-yo, Yellow)", r: "ü™Ä üü°", ex: "Yo-yo, Yellow", audio: "Yuh... Y for Yo-yo... Y for Yellow" },
                { t: "Zz", g: "/z/ (Zebra, Zip)", r: "ü¶ì ü§ê", ex: "Zebra, Zip", audio: "Zzz... Z for Zebra... Z for Zip" }
            ],
            level2: [
                { t: "cat", g: "c-at (kuh-at)", r: "üê±", ex: "", audio: "Kuh... at... Cat" },
                { t: "bat", g: "b-at (buh-at)", r: "ü¶á", ex: "", audio: "Buh... at... Bat" },
                { t: "rat", g: "r-at (ruh-at)", r: "üêÄ", ex: "", audio: "Rrr... at... Rat" },
                { t: "pan", g: "p-an (puh-an)", r: "üç≥", ex: "", audio: "Puh... an... Pan" },
                { t: "man", g: "m-an (mmm-an)", r: "üë®", ex: "", audio: "Mmm... an... Man" },
                { t: "fan", g: "f-an (fff-an)", r: "üí®", ex: "", audio: "Fff... an... Fan" },
                { t: "dog", g: "d-og (duh-og)", r: "üê∂", ex: "", audio: "Duh... og... Dog" },
                { t: "log", g: "l-og (lll-og)", r: "ü™µ", ex: "", audio: "Lll... og... Log" },
                { t: "bug", g: "b-ug (buh-ug)", r: "ü™≤", ex: "", audio: "Buh... ug... Bug" }
            ],
            level3: [
                // BLENDS (Grouped by Sound)
                { t: "stop", g: "st-op", r: "üõë", ex: "Blend: st", audio: "St... op... Stop" },
                { t: "frog", g: "fr-og", r: "üê∏", ex: "Blend: fr", audio: "Fr... og... Frog" },
                { t: "ship", g: "sh-ip", r: "üö¢", ex: "Digraph: sh", audio: "Sh... ip... Ship" },
                { t: "chop", g: "ch-op", r: "ü™ì", ex: "Digraph: ch", audio: "Ch... op... Chop" },
                { t: "fish", g: "fi-sh", r: "üêü", ex: "Digraph: sh", audio: "Fi... sh... Fish" },
                { t: "blue", g: "bl-ue", r: "üîµ", ex: "Blend: bl", audio: "Bl... ue... Blue" },
                { t: "flag", g: "fl-ag", r: "üèÅ", ex: "Blend: fl", audio: "Fl... ag... Flag" },
                { t: "swim", g: "sw-im", r: "üèä", ex: "Blend: sw", audio: "Sw... im... Swim" }
            ],
            level4: [
                // FASTER SENTENCES (0.85 Speed)
                { t: "A big cat", g: "a... big... cat", r: "üêÜ", ex: "", audio: "A big cat" },
                { t: "The red hen", g: "the... red... hen", r: "üêî", ex: "", audio: "The red hen" },
                { t: "I see a dog", g: "I... see... a... dog", r: "üêï", ex: "", audio: "I see a dog" },
                { t: "The sun is hot", g: "the... sun... is... hot", r: "ü•µ", ex: "", audio: "The sun is hot" },
                { t: "Run to me", g: "run... to... me", r: "üèÉ", ex: "", audio: "Run to me" },
                { t: "Cat on a mat", g: "cat... on... a... mat", r: "üõãÔ∏è", ex: "", audio: "Cat on a mat" }
            ]
        };

        // --- GAME ENGINE ---
        let currentList = [];
        let index = 0;
        let synthesis = window.speechSynthesis;
        let currentLevelKey = '';

        function shuffle(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function showMenu() {
            document.getElementById('menu-screen').classList.remove('hidden');
            document.getElementById('game-screen').classList.add('hidden');
            synthesis.cancel();
        }

        function startGame(lvl) {
            currentLevelKey = lvl;
            if(lvl === 'level1') {
                // Level 1: Always A to Z order
                currentList = [...gameData[lvl]];
            } else {
                // Others: Random shuffle
                currentList = shuffle([...gameData[lvl]]);
            }
            index = 0;
            document.getElementById('menu-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            loadCard();
        }

        function loadCard() {
            const item = currentList[index];
            const displayEl = document.getElementById('word-display');
            
            // Adjust text size based on length
            displayEl.innerText = item.t;
            if (item.t.length > 8) { displayEl.style.fontSize = "50px"; }
            else { displayEl.style.fontSize = "85px"; }

            document.getElementById('guide-text').innerText = item.g;
            document.getElementById('example-text').innerText = item.ex; 
            document.getElementById('progress').innerText = `${index + 1} / ${currentList.length}`;

            document.getElementById('reward-area').classList.add('hidden');
            document.getElementById('reward-area').innerText = item.r;
            document.getElementById('check-btn').classList.remove('hidden');
            document.getElementById('nav-buttons').classList.add('hidden');
        }

        function playAudio(isRepeater) {
            synthesis.cancel();
            const item = currentList[index];
            // Use the specific audio text we wrote in gameData
            const u = new SpeechSynthesisUtterance(item.audio);
            
            // --- SPEED SETTINGS ---
            if (currentLevelKey === 'level4') {
                u.rate = 0.85; // Faster Sentences (User Request)
            } else if (currentLevelKey === 'level3') {
                u.rate = 0.8; // Clear Blends
            } else {
                u.rate = 0.9; // Standard
            }
            
            u.pitch = 1.1; // Friendly pitch

            if(isRepeater) {
                // Play 3 times logic
                let count = 0;
                function speakLoop() {
                    if(count < 3) {
                        synthesis.speak(u);
                        let u2 = new SpeechSynthesisUtterance(item.audio);
                        u2.rate = u.rate; u2.pitch = u.pitch;
                        u2.onend = function() { setTimeout(speakLoop, 800); };
                        u = u2; 
                        count++;
                    }
                }
                speakLoop();
            } else {
                synthesis.speak(u);
            }
        }

        function checkAnswer() {
            document.getElementById('reward-area').classList.remove('hidden');
            document.getElementById('check-btn').classList.add('hidden');
            document.getElementById('nav-buttons').classList.remove('hidden');
            playAudio(true); // Trigger the 3x repeat
        }

        function nextWord() {
            synthesis.cancel();
            index++;
            if (index >= currentList.length) {
                alert("üéâ LEVEL COMPLETE! Amazing job!");
                showMenu();
            } else {
                loadCard();
            }
        }
    </script>
</body>
</html>
