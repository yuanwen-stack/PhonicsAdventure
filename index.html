<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Phonics Master Custom</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #F0F4C3; text-align: center; margin: 0; padding: 15px; -webkit-tap-highlight-color: transparent; }
        
        .game-card {
            background: white;
            max-width: 600px;
            margin: 0 auto;
            border-radius: 30px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border: 6px solid #AFB42B;
            min-height: 85vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        h1 { color: #827717; margin: 0 0 10px 0; font-size: 24px; }
        
        /* The Main Letters */
        #word-display {
            font-size: 90px;
            font-weight: 900;
            color: #333;
            margin: 10px 0;
            letter-spacing: 2px;
        }
        
        /* Extra Examples Text */
        .examples { font-size: 18px; color: #777; margin-bottom: 20px; font-style: italic; min-height: 25px; }

        /* Parent Guide */
        .guide-box {
            background: #FFF9C4;
            border: 2px solid #FBC02D;
            color: #E65100;
            padding: 12px 15px;
            text-align: left;
            font-size: 18px;
            border-radius: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .audio-btn {
            background: #FFECB3;
            border: 2px solid #FFD54F;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            font-size: 22px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Buttons */
        button.action-btn {
            font-size: 22px;
            padding: 16px 0;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            margin: 8px 0;
            font-weight: bold;
            width: 100%;
            color: white;
            box-shadow: 0 5px rgba(0,0,0,0.2);
            transition: all 0.1s;
        }
        button.action-btn:active { transform: scale(0.98); box-shadow: 0 2px rgba(0,0,0,0.2); }
        
        .btn-check { background-color: #689F38; }
        .btn-next { background-color: #0288D1; }
        .menu-btn { background-color: #009688; color: white; margin: 8px 0; padding: 15px; width: 100%; border-radius: 15px; border:none; font-weight:bold; font-size: 18px; cursor: pointer; box-shadow: 0 4px #00796B; }

        /* Reward Emoji */
        #reward-area { font-size: 110px; animation: popIn 0.6s; margin: 10px 0; }
        @keyframes popIn { 0% { transform: scale(0); } 100% { transform: scale(1); } }

        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="game-card">
        
        <div id="menu-screen">
            <h1>üìö Phonics Master</h1>
            <p>Choose a Stage:</p>
            <button class="menu-btn" onclick="startGame('level1')">Level 1: ABC Foundation</button>
            <button class="menu-btn" onclick="startGame('level2')">Level 2: Blending (P-an)</button>
            <button class="menu-btn" onclick="startGame('level3')">Level 3: Full Words</button>
            <button class="menu-btn" onclick="startGame('level4')">Level 4: Slow Sentences</button>
        </div>

        <div id="game-screen" class="hidden">
            <div id="progress" style="font-size:12px; color:#999; text-align:right;"></div>

            <div class="guide-box">
                <div>
                    <span style="font-size:11px; display:block; color:#F57F17; font-weight:bold;">TEACH THIS:</span>
                    <span id="guide-text" style="font-weight:bold;"></span>
                </div>
                <button class="audio-btn" onclick="playAudio(false)" title="Help Me Read">üîä</button>
            </div>

            <div id="word-display"></div>
            <div id="example-text" class="examples"></div>
            <div id="reward-area" class="hidden"></div>

            <button id="check-btn" class="action-btn btn-check" onclick="checkAnswer()">Check Answer! ‚ú®</button>
            
            <div id="nav-buttons" class="hidden">
                <button class="action-btn btn-next" onclick="nextWord()">Next Card ‚û°Ô∏è</button>
                <div style="margin-top:15px;">
                    <span style="color:#999; font-size:14px; text-decoration:underline; cursor:pointer;" onclick="showMenu()">Back to Menu</span>
                </div>
            </div>
        </div>

    </div>

    <script>
        /* --- CUSTOM AUDIO SCRIPT ---
           This is where we control EXACTLY what the computer says.
           - level1: "Letter A... A for Apple"
           - level2: "P... an... Pan"
           - level4: Slower speed
        */
        const gameData = {
            level1: [
                { t: "Aa", g: "Name: Ay, Sound: /√¶/", r: "üçé", ex: "Also: Ant, Arrow", audio: "Letter A. A is for Apple. A is for Ant." },
                { t: "Bb", g: "Name: Bee, Sound: /b/", r: "‚öΩ", ex: "Also: Bear, Bus", audio: "Letter B. B is for Ball. B is for Bear." },
                { t: "Cc", g: "Name: Cee, Sound: /k/", r: "üê±", ex: "Also: Car, Cake", audio: "Letter C. C is for Cat. C is for Car." },
                { t: "Dd", g: "Name: Dee, Sound: /d/", r: "üê∂", ex: "Also: Duck, Door", audio: "Letter D. D is for Dog. D is for Duck." },
                { t: "Ee", g: "Name: Ee, Sound: /e/", r: "ü•ö", ex: "Also: Elephant", audio: "Letter E. E is for Egg. E is for Elephant." },
                { t: "Ff", g: "Name: Eff, Sound: /f/", r: "üêü", ex: "Also: Fan, Five", audio: "Letter F. F is for Fish. F is for Fan." },
                { t: "Gg", g: "Name: Jee, Sound: /g/", r: "üêê", ex: "Also: Girl, Gate", audio: "Letter G. G is for Goat. G is for Girl." },
                { t: "Hh", g: "Name: Aitch, Sound: /h/", r: "üé©", ex: "Also: House, Hen", audio: "Letter H. H is for Hat. H is for House." },
                { t: "Ii", g: "Name: Eye, Sound: /i/", r: "üßä", ex: "Also: Insect, Ink", audio: "Letter I. I is for Igloo. I is for Insect." },
                // ... You can add J-Z here following the pattern ...
                { t: "Pp", g: "Name: Pee, Sound: /p/", r: "üê∑", ex: "Also: Pen, Pot", audio: "Letter P. P is for Pig. P is for Pen." },
                { t: "Ss", g: "Name: Ess, Sound: /s/", r: "üêç", ex: "Also: Sock, Six", audio: "Letter S. S is for Sun. S is for Sock." },
                { t: "Tt", g: "Name: Tee, Sound: /t/", r: "üêØ", ex: "Also: Ten, Top", audio: "Letter T. T is for Tiger. T is for Ten." }
            ],
            level2: [
                // AN Family
                { t: "pan", g: "p-an (peh-an)", r: "üç≥", ex: "Family: -an", audio: "P... an... Pan." },
                { t: "fan", g: "f-an (fff-an)", r: "üí®", ex: "Family: -an", audio: "Fff... an... Fan." },
                { t: "man", g: "m-an (mmm-an)", r: "üë®", ex: "Family: -an", audio: "Mmm... an... Man." },
                { t: "can", g: "c-an (kuh-an)", r: "ü•´", ex: "Family: -an", audio: "Kuh... an... Can." },
                // AT Family
                { t: "cat", g: "c-at (kuh-at)", r: "üê±", ex: "Family: -at", audio: "Kuh... at... Cat." },
                { t: "bat", g: "b-at (buh-at)", r: "ü¶á", ex: "Family: -at", audio: "Buh... at... Bat." },
                { t: "hat", g: "h-at (huh-at)", r: "üé©", ex: "Family: -at", audio: "Huh... at... Hat." }
            ],
            level3: [
                { t: "frog", g: "fr-og", r: "üê∏", ex: "Blend: fr", audio: "Frrr... og... Frog." },
                { t: "stop", g: "st-op", r: "üõë", ex: "Blend: st", audio: "Sttt... op... Stop." },
                { t: "ship", g: "sh-ip", r: "üö¢", ex: "Digraph: sh", audio: "Shhh... ip... Ship." },
                { t: "duck", g: "d-uck", r: "ü¶Ü", ex: "End sound: ck", audio: "Duh... uck... Duck." }
            ],
            level4: [
                { t: "The cat sat.", g: "the... cat... sat", r: "üêà", ex: "Simple Sentence", audio: "The... cat... sat." },
                { t: "I see a dog.", g: "I... see... a... dog", r: "üêï", ex: "Simple Sentence", audio: "I... see... a... dog." },
                { t: "The sun is hot.", g: "the... sun... is... hot", r: "ü•µ", ex: "Simple Sentence", audio: "The... sun... is... hot." }
            ]
        };

        // --- GAME ENGINE ---
        let currentList = [];
        let index = 0;
        let synthesis = window.speechSynthesis;
        let currentLevelKey = '';

        function shuffle(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function showMenu() {
            document.getElementById('menu-screen').classList.remove('hidden');
            document.getElementById('game-screen').classList.add('hidden');
            synthesis.cancel();
        }

        function startGame(lvl) {
            currentLevelKey = lvl;
            // Level 1: Keep Order (A-Z). Others: Shuffle.
            if(lvl === 'level1') {
                currentList = [...gameData[lvl]];
            } else {
                currentList = shuffle([...gameData[lvl]]);
            }
            
            index = 0;
            document.getElementById('menu-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            loadCard();
        }

        function loadCard() {
            const item = currentList[index];
            
            // Adjust Font Size for Sentences
            const displayEl = document.getElementById('word-display');
            displayEl.innerText = item.t;
            if (currentLevelKey === 'level4') { displayEl.style.fontSize = "50px"; }
            else { displayEl.style.fontSize = "90px"; }

            document.getElementById('guide-text').innerText = item.g;
            document.getElementById('example-text').innerText = item.ex; // Show extra examples
            document.getElementById('progress').innerText = `${index + 1} / ${currentList.length}`;

            // Reset UI
            document.getElementById('reward-area').classList.add('hidden');
            document.getElementById('reward-area').innerText = item.r;
            document.getElementById('check-btn').classList.remove('hidden');
            document.getElementById('nav-buttons').classList.add('hidden');
        }

        function playAudio(isRepeater) {
            synthesis.cancel();
            const item = currentList[index];
            const u = new SpeechSynthesisUtterance(item.audio);
            
            // --- EXPERT SPEED SETTINGS ---
            if (currentLevelKey === 'level4') {
                u.rate = 0.6; // Very Slow for Sentences
            } else if (currentLevelKey === 'level2') {
                u.rate = 0.8; // Slow for Blending (P... an)
            } else {
                u.rate = 0.9; // Normalish for ABC
            }

            u.pitch = 1.1; // Friendly tone

            // If it's the 3x Repeater, loop it
            if(isRepeater) {
                let count = 0;
                function speakLoop() {
                    if(count < 3) {
                        synthesis.speak(u);
                        // We need to create a new utterance object for loop to work reliably on some browsers
                        let u2 = new SpeechSynthesisUtterance(item.audio);
                        u2.rate = u.rate; u2.pitch = u.pitch;
                        u2.onend = function() { setTimeout(speakLoop, 800); }; // Pause between repeats
                        u = u2; 
                        count++;
                    }
                }
                speakLoop();
            } else {
                // Just play once (Help button)
                synthesis.speak(u);
            }
        }

        function checkAnswer() {
            document.getElementById('reward-area').classList.remove('hidden');
            document.getElementById('check-btn').classList.add('hidden');
            document.getElementById('nav-buttons').classList.remove('hidden');
            
            // Play the "Master Audio" 3 times
            playAudio(true);
        }

        function nextWord() {
            synthesis.cancel();
            index++;
            if (index >= currentList.length) {
                alert("üéâ LEVEL COMPLETE! You are a superstar!");
                showMenu();
            } else {
                loadCard();
            }
        }
    </script>
</body>
</html>
